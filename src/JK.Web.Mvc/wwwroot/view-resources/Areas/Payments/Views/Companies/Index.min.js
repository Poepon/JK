(function(){$(function(){function e(i){abp.message.confirm(i.name+"将会被删除。","您确定吗？",function(r){r&&t.delete({id:i.id}).done(function(){n();abp.notify.success("删除成功。")})})}function r(i,r){t.enable({id:i,isAction:r}).done(function(){n()})}function n(){f.ajax.reload()}var t=abp.services.app.company,i=new app.ModalManager({viewUrl:abp.appPath+"Payments/Companies/CreateOrEditModal",scriptUrl:abp.appPath+"view-resources/Areas/Payments/Views/Companies/_CreateOrEditModal.js",modalClass:"CreateOrEditCompanyModal"}),u,f;$("#CreateNewButton").click(function(){i.open()});$("#QueryButton").click(function(){n()});abp.event.on("app.createOrEditCompanyModalSaved",function(){n()});u=$("#DataTable");f=u.DataTable({paging:!0,serverSide:!0,processing:!0,listAction:{ajaxFunction:t.getAll,inputFilter:function(){var n={};return $("#companiesFilter").serializeArray().map(function(t){n[abp.utils.toCamelCase(t.name)]=t.value}),n}},columnDefs:[{targets:0,data:"name"},{targets:1,data:"isActive",orderable:!1,render:function(n){return n?'<i class="material-icons" style="color:green;">check_box<\/i>':'<i class="material-icons" style="color:red;">indeterminate_check_box<\/i>'}},{targets:2,data:null,orderable:!1,autoWidth:!1,defaultContent:"",rowAction:{text:'<i class="fa fa-cog"><\/i>操作<span class="caret"><\/span>',items:[{text:"修改",action:function(n){i.open({id:n.record.id})}},{text:"删除",action:function(n){e(n.record)}},{text:"启用",visible:function(n){return n.record.isActive==!1?!0:!1},action:function(n){r(n.record.id,!0)}},{text:"禁用",visible:function(n){return n.record.isActive==!0?!0:!1},action:function(n){r(n.record.id,!1)}}]}}]})})})();