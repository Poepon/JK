(function(){$(function(){function n(){var n=$("#message").val(),t,i;n.trim()!==""&&(t={gid:1,uid:1,msg:n},i=serializeMsgPack(t),chat.sendCommand(chat.commandType.SendMessage,chat.dataType.MessagePack,i),$("#message").val(""))}abp.event.on("websocket.onopen",function(){$("#btnOpen").hide();$("#btnClose").show()});abp.event.on("websocket.onclose",function(){$("#btnClose").hide();$("#btnOpen").show()});abp.event.on("websocket.onerror",function(){console.log("onerror",event)});abp.event.on("websocket.onreceivebinary",function(n){var t=chat.receiveCommand(n),i;t.dataType===chat.dataType.MessagePack&&(i=deserializeMsgPack(t.data),t.commandType===chat.commandType.GetMessage&&console.log(i))});abp.event.on("websocket.onreceiveblob",function(){});abp.event.on("websocket.onreceivetext",function(n){var t,i;console.log(n);t=JSON.parse(n);switch(t.CommandType){case chat.commandType.Connected:i=JSON.parse(t.Data);abp.utils.setCookieValue("chatConnectionId",i.ConnectionId)}});chat.init();$("#message").focus();$("#btnOpen").click(function(){chat.online()});$("#btnClose").click(function(){chat.offline()});$("#btnSend").click(n);$("#message").keyup(function(t){t.keyCode===13&&n()})})})();